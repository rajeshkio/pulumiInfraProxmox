config:
  proxmox-k3s-cluster:password:
    secure: AAABAGl9s0KsvoAS4g84MUxnyJqWmQLGAeHMbnldANzDkde0yRVTfg==
  proxmox-k3s-cluster:gateway: 192.168.90.1

  # INFRASTRUCTURE LAYER - Just VMs (replaces vm-templates, vm-groups, etc.)
  proxmox-k3s-cluster:vms:
    # Kubernetes control plane nodes
    - name: "control-plane"
      count: 3
      templateId: 9000 # Ubuntu template
      cpu: 4
      memory: 4000
      diskSize: 32
      ips: ["192.168.90.230", "192.168.90.231", "192.168.90.232"]
      username: rajeshk
      authMethod: ssh-key
      proxmoxNode: proxmox-2
      bootMethod: cloud-init

    # Kubernetes worker nodes
    - name: "workers"
      count: 1
      templateId: 9000 # Ubuntu template
      cpu: 4
      memory: 4000
      diskSize: 32
      ips: ["192.168.90.233", "192.168.90.234"]
      username: rajeshk
      authMethod: ssh-key
      proxmoxNode: proxmox-2
      bootMethod: cloud-init

    # # Load balancer nodes
    # - name: "load-balancer"
    #   count: 1
    #   templateId: 9000 # Ubuntu template
    #   cpu: 2
    #   memory: 2000
    #   diskSize: 32
    #   ips: ["192.168.90.235"]
    #   username: rajeshk
    #   authMethod: ssh-key
    #   proxmoxNode: proxmox-2
    #   bootMethod: cloud-init

    # # Harvester hyperconverged infrastructure (iPXE boot)
    # - name: "harvester-nodes"
    #   count: 1
    #   templateId: 9000 # Doesn't matter for iPXE
    #   cpu: 16
    #   memory: 40000
    #   diskSize: 300
    #   ips: ["192.168.90.240"]
    #   username: rajeshk
    #   authMethod: ssh-key
    #   proxmoxNode: proxmox-3
    #   bootMethod: ipxe # iPXE boot for Harvester
    #   ipxeConfig:
    #     version: "v1.4.1"
    #     isoFileName: "harvester-ipxe.iso"

  # SERVICES LAYER - What runs on those VMs (replaces role-based actions)
  proxmox-k3s-cluster:services:
    # Load balancer service
    haproxy:
      enabled: false
      targets: ["load-balancer"]
      backendDiscovery: "control-plane" # HAProxy will load balance to control-plane nodes
      config:
        frontend-port: 6443
        backend-port: 6443

    # Choose ONE Kubernetes distribution for testing
    kubeadm:
      enabled: true # Testing kubeadm
      controlPlane: ["control-plane"]
      workers: ["workers"]
      config:
        kubernetes-version: "1.28.0"
        pod-network-cidr: "10.244.0.0/16"

    k3s:
      enabled: false # Not using K3s this time
      controlPlane: ["control-plane"]
      workers: ["workers"]
      config:
        cluster-init: false
        tls-san-loadbalancer: true

    rke2:
      enabled: false # Not using RKE2 this time
      controlPlane: ["control-plane"]
      workers: ["workers"]

    talos:
      enabled: false # Not using Talos this time
      targets: ["control-plane", "workers"]

    # Harvester hyperconverged infrastructure
    harvester:
      enabled: false
      targets: ["harvester-nodes"]
      config:
        cluster-mode: "create" # Create new cluster vs join existing
