config:
  proxmox-k3s-cluster:features:
    loadbalancer: true
    k3s: false
    rke2: true
    harvester: false
  
  proxmox-k3s-cluster:password:
    secure: AAABAGl9s0KsvoAS4g84MUxnyJqWmQLGAeHMbnldANzDkde0yRVTfg==
  
  proxmox-k3s-cluster:vm-templates:
    # RKE2 Server Nodes
    - count: 3
      cpu: 10
      disk-size: 100
      id: 9001
      ipconfig: "static"
      ips: ["192.168.90.200", "192.168.90.201", "192.168.90.202"]
      memory: 10000
      name: sle-micro-template
      vmName: rke2-server
      username: rajeshk
      authMethod: ssh-key
      role: rke2-server
      disksize: 32
      proxmoxNode: proxmox-2
      actions:
        - type: "install-rke2-server"
          dependsOn: ["loadbalancer"]
        - type: "get-rke2-kubeconfig"
          dependsOn: ["rke2-server-install-rke2-server"]
          config:
            cluster-init: true
            tls-san-loadbalancer: true

    # HAProxy Load Balancer
    - count: 1
      cpu: 2
      disk-size: 20
      id: 9000
      ips: ["192.168.90.195"]
      memory: 2000
      ipconfig: "static"
      name: ubuntu-22.04-template
      vmName: loadbalancer-rke2
      username: rajeshk
      authMethod: ssh-key
      role: loadbalancer
      disksize: 32
      proxmoxNode: proxmox-2
      actions:
        - type: "install-haproxy"
          config:
            backend-port: 6443
            frontend-port: 6443

  proxmox-k3s-cluster:gateway: 192.168.90.1
